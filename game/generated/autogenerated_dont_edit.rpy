# This file is auto-generated by compile_data_v2.py. Do not edit manually.
init python:
    from classes import *
    #region Flow actions. Sorted.
    NOTIFY = "NOTIFY" # x17
    GOAL_SHOW = "GOAL_SHOW" # x12
    GOAL_TICK = "GOAL_TICK" # x12
    FLAG = "FLAG" # x7
    BOND = "BOND" # x4
    GIVE = "GIVE" # x3
    PLAYER = "PLAYER" # x2
    ZONE = "ZONE" # x2
    COMPANION = "COMPANION" # x2
    FLAG_SET = "FLAG_SET" # x2
    SHOW_ITEM = "SHOW_ITEM" # x1
    HIDE_ITEM = "HIDE_ITEM" # x1
    PLAY = "PLAY" # x1
    GOAL_PASSED = "GOAL_PASSED" # x1
    MET = "MET" # x1
    PERK = "PERK" # x1
    STATUS = "STATUS" # x1
    GAIN = "GAIN" # x1
    REST = "REST" # x1
    #endregion
    #region Conditions.
    def _cond_3715432625154802624(): return theo.bond(ash, "affinity") > 10
    def _cond__4500558766944514781(): return flag_get("harmonic_key_obtained")
    def _cond_1345162464633557927(): return not flag_get('scout_joined', False)
    def _cond_2787940891760913597(): return flag_get('scout_joined', False)
    def _cond_1(): return True
    def _cond__4040550758336731460(): return flag_get('protocol_recovered', False) and not flag_get('protocol_deciphered', False)
    def _cond_5265562103908310780(): return player.stats.charisma >= 10
    def _cond_6687328864398908423(): return not flag_get('cadence_learned', False)
    #endregion

#region Awards x5
# Lore Keeper. Discover 5 hidden notes
define lore_keeper = Award("lore_keeper", name='Lore Keeper', desc='Discover 5 hidden notes', icon='ðŸ“œ', tags=['exploration', 'lore'], trigger={'event': 'NOTE_UNLOCKED'}, ticks=5)
# Social Butterfly. Meet 10 different characters
define social_butterfly = Award("social_butterfly", name='Social Butterfly', desc='Meet 10 different characters', icon='ðŸ¦‹', tags=['social', 'exploration'], trigger={'event': 'CHAR_MET'}, ticks=10)
# Completionist. Complete 100% of the game
define completionist = Award("completionist", name='Completionist', desc='Complete 100% of the game', icon='ðŸ‘‘', tags=['endgame', 'completion'])
# Master Crafter. Craft your first item
define master_crafter = Award("master_crafter", name='Master Crafter', desc='Craft your first item', icon='ðŸ”¨', tags=['crafting', 'progress'], trigger={'event': 'ITEM_CRAFTED'}, ticks=1)
# First Steps. Begin your adventure in the world
define first_steps = Award("first_steps", name='First Steps', desc='Begin your adventure in the world', icon='ðŸš€', tags=['intro', 'progress'], trigger={'event': 'GAME_STARTED'})
#endregion

#region Lores x1
# Outbreak Chronicle. 
define outbreak_chronicle = Lore("outbreak_chronicle", name='Outbreak Chronicle')
#endregion

#region Items x56
# Wood. A sturdy piece of timber.
define wood = Item("wood", name='Wood', desc='A sturdy piece of timber.', value=2, weight=1.0, stack_size=50, tags=['material', 'crafting'])
# Compass. An old needle compass that still holds north.
define compass = Item("compass", name='Compass', desc='An old needle compass that still holds north.', weight=0.2, value=12, tags=['tool', 'utility'])
# Map Fragment. A torn map showing a few quiet corridors.
define map_fragment = Item("map_fragment", name='Map Fragment', desc='A torn map showing a few quiet corridors.', weight=0.1, value=6, tags=['quest', 'note'])
# Scrub Pants. Easy-clean pants for clinic work.
define scrub_pants = Item("scrub_pants", name='Scrub Pants', desc='Easy-clean pants for clinic work.', weight=0.8, value=9, equip_slots=['pants'], tags=['clothing', 'medical'])
# Patrol Jacket. A perimeter-issued jacket with reinforced seams.
define patrol_jacket = Item("patrol_jacket", name='Patrol Jacket', desc='A perimeter-issued jacket with reinforced seams.', weight=1.8, value=20, equip_slots=['torso'], tags=['clothing', 'uniform'])
# Signal Hoodie. A soft hoodie with stitched signal markers along the cuff.
define signal_hoodie = Item("signal_hoodie", name='Signal Hoodie', desc='A soft hoodie with stitched signal markers along the cuff.', weight=0.9, value=10, equip_slots=['torso'], tags=['clothing', 'casual'])
# Deciphered Protocol. The original frequency patterns, now fully understood. It is a bridge between the city and the silence.
define protocol_deciphered = Item("protocol_deciphered", name='Deciphered Protocol', desc='The original frequency patterns, now fully understood. It is a bridge between the city and the silence.', value=0, weight=0.1, tags=['lore', 'quest_item'])
# Camp Kit. A light bundle for resting outdoors.
define camp_kit = Item("camp_kit", name='Camp Kit', desc='A light bundle for resting outdoors.', weight=1.0, value=20, tags=['camp', 'utility'])
# Battery Cell. A compact power cell for scanners and receivers.
define battery_cell = Item("battery_cell", name='Battery Cell', desc='A compact power cell for scanners and receivers.', weight=0.1, value=5, stack_size=6, tags=['material', 'utility'])
# Multitool. Fold-out pliers and blades for quick fixes.
define multitool = Item("multitool", name='Multitool', desc='Fold-out pliers and blades for quick fixes.', weight=0.4, value=15, tags=['tool', 'utility'])
# Signal Baton. A weighted baton tuned to knock and tap without harm.
define signal_baton = Item("signal_baton", name='Signal Baton', desc='A weighted baton tuned to knock and tap without harm.', value=10, weight=2.5, equip_slots=['main_hand'], tags=['tool', 'signal'])
# Coveralls. One-piece coveralls stained with honest work.
define coveralls = Item("coveralls", name='Coveralls', desc='One-piece coveralls stained with honest work.', weight=2.2, value=22, equip_slots=['two_piece'], tags=['clothing', 'work'])
# Patrol Boots. Heavy-duty boots with muted tread for perimeter work.
define patrol_boots = Item("patrol_boots", name='Patrol Boots', desc='Heavy-duty boots with muted tread for perimeter work.', weight=1.7, value=22, equip_slots=['feet'], tags=['clothing', 'footwear', 'uniform'])
# Utility Jacket. A rugged jacket with quiet snaps and deep pockets.
define utility_jacket = Item("utility_jacket", name='Utility Jacket', desc='A rugged jacket with quiet snaps and deep pockets.', weight=1.5, value=18, equip_slots=['torso'], tags=['clothing', 'outerwear'])
# Rain Shell. A water-shedding shell that crackles softly with every step.
define rain_shell = Item("rain_shell", name='Rain Shell', desc='A water-shedding shell that crackles softly with every step.', weight=1.0, value=12, equip_slots=['torso'], tags=['clothing', 'outerwear'])
# Med Patch. A quick-seal patch infused with coagulant.
define med_patch = Item("med_patch", name='Med Patch', desc='A quick-seal patch infused with coagulant.', weight=0.1, value=8, stack_size=4, tags=['consumable', 'medical'])
# Broadcast Protocol. A fragile data drive salvaged from the spire. Its signal could lead the sleepers home.
define broadcast_protocol = Item("broadcast_protocol", name='Broadcast Protocol', desc='A fragile data drive salvaged from the spire. Its signal could lead the sleepers home.', value=0, weight=0.1, tags=['lore', 'quest_item'])
# Utility Pry Bar. A solid metal bar for lifting panels and opening jammed doors.
define utility_pry_bar = Item("utility_pry_bar", name='Utility Pry Bar', desc='A solid metal bar for lifting panels and opening jammed doors.', weight=2.0, value=50, tags=['tool', 'metal', 'utility'], equip_slots=['main_hand'])
# Trail Boots. Quiet-soled boots built for long routes beyond the walls.
define trail_boots = Item("trail_boots", name='Trail Boots', desc='Quiet-soled boots built for long routes beyond the walls.', weight=1.4, value=18, equip_slots=['feet'], tags=['clothing', 'footwear'])
# Sneakers. 
define sneakers = Item("sneakers", name='Sneakers', ddescn='Light, quiet sneakers with worn soles.', weight=0.8, value=10, equip_slots=['feet'], tags=['clothing', 'footwear'])
# Note Card. A laminated card for logging routes and supplies.
define note_card = Item("note_card", name='Note Card', desc='A laminated card for logging routes and supplies.', weight=0.05, value=1, stack_size=8, tags=['note'])
# Track Pants. Soft athletic pants that move quietly.
define track_pants = Item("track_pants", name='Track Pants', desc='Soft athletic pants that move quietly.', weight=0.7, value=8, equip_slots=['pants'], tags=['clothing', 'casual'])
# Keycard. A low-clearance card for doors and log terminals.
define keycard = Item("keycard", name='Keycard', desc='A low-clearance card for doors and log terminals.', weight=0.05, value=5, tags=['key'])
# Medical Coat. A clean coat marked with clinic patches and a pen loop.
define medical_coat = Item("medical_coat", name='Medical Coat', desc='A clean coat marked with clinic patches and a pen loop.', weight=1.0, value=14, equip_slots=['torso'], tags=['clothing', 'medical'])
# Bandage Roll. Flexible wrap for sprains and cuts.
define bandage_roll = Item("bandage_roll", name='Bandage Roll', desc='Flexible wrap for sprains and cuts.', weight=0.2, value=4, stack_size=4, tags=['consumable', 'medical'])
# Lockpick Set. Slim picks and a tension wrench in a soft sleeve.
define lockpick_set = Item("lockpick_set", name='Lockpick Set', desc='Slim picks and a tension wrench in a soft sleeve.', weight=0.2, value=12, tags=['tool', 'utility'])
# Patrol Pants. Tough pants with reinforced knees and stitched unit marks.
define patrol_pants = Item("patrol_pants", name='Patrol Pants', desc='Tough pants with reinforced knees and stitched unit marks.', weight=1.2, value=14, equip_slots=['pants'], tags=['clothing', 'uniform'])
# Radio Receiver. A compact receiver tuned for low-frequency drift pings.
define radio_receiver = Item("radio_receiver", name='Radio Receiver', desc='A compact receiver tuned for low-frequency drift pings.', weight=0.6, value=20, tags=['tool', 'utility'])
# Watch Cap. A low-profile patrol cap favored by perimeter watchers.
define watch_cap = Item("watch_cap", name='Watch Cap', desc='A low-profile patrol cap favored by perimeter watchers.', weight=0.2, value=7, equip_slots=['head'], tags=['clothing', 'headwear', 'uniform'])
# Work Pants. 
define work_pants = Item("work_pants", name='Work Pants', ddescn='Hard-wearing trousers built for hauling and lifting.', weight=1.1, value=10, equip_slots=['pants'], tags=['clothing', 'work'])
# Cargo Pants. Durable pants with quiet pockets and reinforced knees.
define cargo_pants = Item("cargo_pants", name='Cargo Pants', desc='Durable pants with quiet pockets and reinforced knees.', weight=1.0, value=12, equip_slots=['pants'], tags=['clothing'])
# Ball Cap. A faded cap with a curved brim and a stitched logo long worn smooth.
define ball_cap = Item("ball_cap", name='Ball Cap', desc='A faded cap with a curved brim and a stitched logo long worn smooth.', weight=0.2, value=6, equip_slots=['head'], tags=['clothing', 'headwear'])
# Surgical Cap. 
define surgical_cap = Item("surgical_cap", name='Surgical Cap', ddescn="A sterile cap that keeps hair out of the clinic's clean zone.", weight=0.1, value=4, equip_slots=['head'], tags=['clothing', 'headwear', 'medical'])
# Slacks. Clean, quiet slacks favored by clerks and planners.
define slacks = Item("slacks", name='Slacks', desc='Clean, quiet slacks favored by clerks and planners.', weight=0.9, value=12, equip_slots=['pants'], tags=['clothing'])
# Tool Pouch. A canvas pouch with loops for small tools.
define tool_pouch = Item("tool_pouch", name='Tool Pouch', desc='A canvas pouch with loops for small tools.', weight=0.5, value=10, tags=['tool', 'container'])
# Sewing Kit. Needle, thread, and a few spare buttons.
define sewing_kit = Item("sewing_kit", name='Sewing Kit', desc='Needle, thread, and a few spare buttons.', weight=0.3, value=9, tags=['tool', 'utility'])
# Signal Chalk. Dusty sticks used to mark quiet routes and safe doors.
define signal_chalk = Item("signal_chalk", name='Signal Chalk', desc='Dusty sticks used to mark quiet routes and safe doors.', weight=0.1, value=2, stack_size=6, tags=['tool', 'utility'])
# Glow Stick. Low-light marker that lasts a few hours.
define glow_stick = Item("glow_stick", name='Glow Stick', desc='Low-light marker that lasts a few hours.', weight=0.1, value=2, stack_size=6, tags=['consumable', 'utility'])
# Denim Jacket. A reinforced jacket with patched elbows and a worn collar.
define denim_jacket = Item("denim_jacket", name='Denim Jacket', desc='A reinforced jacket with patched elbows and a worn collar.', weight=1.2, value=15, equip_slots=['torso'], tags=['clothing', 'outerwear'])
# Water Flask. A dented flask with a silent cap and clean seal.
define water_flask = Item("water_flask", name='Water Flask', desc='A dented flask with a silent cap and clean seal.', weight=0.8, value=6, tags=['consumable', 'drink'])
# Clinic Shoes. Slip-resistant shoes built for long clinic shifts.
define clinic_shoes = Item("clinic_shoes", name='Clinic Shoes', desc='Slip-resistant shoes built for long clinic shifts.', weight=0.6, value=10, equip_slots=['feet'], tags=['clothing', 'footwear', 'medical'])
# Antiseptic Wipe. Single-use cloth for cleaning wounds and tools.
define antiseptic_wipe = Item("antiseptic_wipe", name='Antiseptic Wipe', desc='Single-use cloth for cleaning wounds and tools.', weight=0.05, value=2, stack_size=10, tags=['consumable', 'medical'])
# Knit Cap. A warm, close-knit cap that keeps noise-raisers out of your ears.
define knit_cap = Item("knit_cap", name='Knit Cap', desc='A warm, close-knit cap that keeps noise-raisers out of your ears.', weight=0.2, value=5, equip_slots=['head'], tags=['clothing', 'headwear'])
# Supply Apron. A heavy canvas apron that keeps ration dust off your clothes.
define supply_apron = Item("supply_apron", name='Supply Apron', desc='A heavy canvas apron that keeps ration dust off your clothes.', weight=0.5, value=8, equip_slots=['torso'], tags=['clothing', 'work'])
# Archivist Coat. A long, quiet coat lined with pockets for data logs.
define archivist_coat = Item("archivist_coat", name='Archivist Coat', desc='A long, quiet coat lined with pockets for data logs.', weight=1.3, value=16, equip_slots=['torso'], tags=['clothing'])
# Stone. A heavy rock.
define stone = Item("stone", name='Stone', desc='A heavy rock.', value=1, weight=2.0, stack_size=30, tags=['material', 'crafting'])
# Ration Pack. Sealed meal bricks meant to keep you steady and quiet.
define ration_pack = Item("ration_pack", name='Ration Pack', desc='Sealed meal bricks meant to keep you steady and quiet.', weight=0.6, value=8, stack_size=3, tags=['consumable', 'food'])
# Work Boots. Sturdy boots that keep your footing on rusted stairs.
define work_boots = Item("work_boots", name='Work Boots', desc='Sturdy boots that keep your footing on rusted stairs.', weight=1.6, value=20, equip_slots=['feet'], tags=['clothing', 'footwear', 'work'])
# Ration Bar. A compact calorie bar for quick energy.
define ration_bar = Item("ration_bar", name='Ration Bar', desc='A compact calorie bar for quick energy.', weight=0.2, value=5, stack_size=20, tags=['food', 'ration'])
# Antiseptic Ampoule. A sealed dose that eases fever and stabilizes wounds.
define antiseptic_ampoule = Item("antiseptic_ampoule", name='Antiseptic Ampoule', desc='A sealed dose that eases fever and stabilizes wounds.', mass=3, cost=25, stack_size=5, tags=['medical', 'consumable', 'health'])
# Logistics Coat. 
define logistics_coat = Item("logistics_coat", name='Logistics Coat', ddescn='A tailored coat with colored tabs for resource priority levels.', weight=1.6, value=19, equip_slots=['torso'], tags=['clothing', 'uniform'])
# Scrap Parts. Mixed fasteners, wire, and salvageable fittings.
define scrap_parts = Item("scrap_parts", name='Scrap Parts', desc='Mixed fasteners, wire, and salvageable fittings.', weight=0.7, value=5, stack_size=5, tags=['material', 'crafting'])
# Bandana. A triangular scarf that can be tied for sweat, dust, or anonymity.
define bandana = Item("bandana", name='Bandana', desc='A triangular scarf that can be tied for sweat, dust, or anonymity.', weight=0.1, value=3, equip_slots=['head'], tags=['clothing', 'headwear'])
# Ancient Relic. A pulsing obsidian cube pulsing with a low, rhythmic frequency.
define ancient_relic = Item("ancient_relic", name='Ancient Relic', desc='A pulsing obsidian cube pulsing with a low, rhythmic frequency.', cost=0, mass=1, tags=['lore', 'quest_item'])
# Protein Bar. A dense, chalky bar that keeps you moving.
define protein_bar = Item("protein_bar", name='Protein Bar', desc='A dense, chalky bar that keeps you moving.', weight=0.2, value=3, stack_size=6, tags=['consumable', 'food'])
# Rubber Boots. Waterproof boots for docks and flood zones.
define rubber_boots = Item("rubber_boots", name='Rubber Boots', desc='Waterproof boots for docks and flood zones.', weight=1.5, value=16, equip_slots=['feet'], tags=['clothing', 'footwear'])
#endregion

#region Quests x6
# Tools and Fire. Mechanic Greta needs materials to build non-lethal tools and alarms.
define iron_and_fire = Quest("iron_and_fire", name='Tools and Fire', desc='Mechanic Greta needs materials to build non-lethal tools and alarms.')
# Patient Zero. Theo is searching for the first record of the sleepers.
define theo_secret = Quest("theo_secret", name='Patient Zero', desc='Theo is searching for the first record of the sleepers.')
# Chain of Command. Meet the leaders keeping the district steady.
define formal_intro = Quest("formal_intro", name='Chain of Command', desc='Meet the leaders keeping the district steady.')
# Ration Run. Gather rations for the shelter.
define ration_run = Quest("ration_run", name='Ration Run', desc='Gather rations for the shelter.')
# The Long Dawn. Track the Spire's shifting signal and protect the settlement through calm, non-violent guidance.
define long_dawn = Quest("long_dawn", name='The Long Dawn', desc="Track the Spire's shifting signal and protect the settlement through calm, non-violent guidance.", tags=[True])
# The Silent Tide. Follow the sleepers' rhythm to craft a non-violent way to guide them away from the city.
define silent_tide = Quest("silent_tide", name='The Silent Tide', desc="Follow the sleepers' rhythm to craft a non-violent way to guide them away from the city.", tags=['origin'])
define silent_tide__ordinary_world = QuestTick("silent_tide__ordinary_world", desc='Look for the $clerk at the $shop.', mark=['shop', 'clerk'], trigger={'event': 'CHAR_MET', 'state': {'character': 'clerk'}}, name='Ordinary World')
define silent_tide__call_to_adventure = QuestTick("silent_tide__call_to_adventure", desc='Check out the $market.', mark=['market'], trigger={'event': 'LOCATION_ENTERED', 'state': {'location': 'market'}}, name='Call to Adventure')
define silent_tide__refusal_of_the_call = QuestTick("silent_tide__refusal_of_the_call", desc='Visit the $clerk at the $shop.', mark=['shop'], trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'shop'}}, name='Refusal of the Call')
define silent_tide__meeting_the_mentor = QuestTick("silent_tide__meeting_the_mentor", desc='Talk to $ash at the $tavern.', mark=['tavern', 'ash'], trigger={'event': 'CHAR_MET', 'state': {'a': 'theo', 'b': 'ash'}}, name='Meeting the Mentor')
define silent_tide__crossing_the_threshold = QuestTick("silent_tide__crossing_the_threshold", desc='Visit the docks.', mark=['docks'], trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'docks'}}, name='Crossing the Threshold')
define silent_tide__tests_and_allies = QuestTick("silent_tide__tests_and_allies", mark=['tavern'], trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'tavern'}}, name='Tests and Allies')
define silent_tide__approach = QuestTick("silent_tide__approach", mark=['mage_tower'], trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'mage_tower'}}, name='Approach')
define silent_tide__ordeal = QuestTick("silent_tide__ordeal", desc='Visit the $mage_tower.', mark=['mage_tower'], trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'mage_tower'}, 'flags': {'broadcast_tower_reached': True}}, name='Ordeal')
define silent_tide__reward = QuestTick("silent_tide__reward", name='Find the Harmonic Key', trigger={'event': 'FLAG_SET', 'flags': {'harmonic_key_obtained': True}})
define silent_tide__the_road_back = QuestTick("silent_tide__the_road_back", desc='Head back to temple.', mark=['temple'], trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'temple'}}, name='The Road Back')
define silent_tide__resurrection = QuestTick("silent_tide__resurrection", desc='Visit the market.', mark=['market'], trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'market'}, 'flags': {'broadcast_success': True}}, name='Resurrection')
define silent_tide__return_with_the_elixir = QuestTick("silent_tide__return_with_the_elixir", mark='temple', trigger={'event': 'LOCATION_ENTERED', 'state': {'character': 'theo', 'location': 'temple'}}, name='Return with the Elixir')
define silent_tide__ask_the_clerk = Choice("silent_tide__ask_the_clerk", menu='clerk', text="Ask the clerk about the sleepers' rhythm.", flags={'asked_clerk': None})
define silent_tide__share_the_pattern_with_ash = Choice("silent_tide__share_the_pattern_with_ash", menu='ash', text="Share the pattern you've recorded with Ash.", cond='3715432625154802624')
define silent_tide__attempt_harmonic_broadcast = Choice("silent_tide__attempt_harmonic_broadcast", menu='clerk', text='Offer to run the harmonic broadcast (requires harmonic key).', cond='_4500558766944514781')
#endregion

#region Quest_ticks x0
#endregion

#region Choices x0
#endregion

#region Flags x1
# Found Spoon. 
define found_spoon = Flag("found_spoon", name='Found Spoon')
#endregion

#region Crafts x1
# Signal Baton. 
define craft_signal_baton = Craft("craft_signal_baton", name='Signal Baton', inputs={'wood': 1, 'stone': 1}, output={'signal_baton': 1}, req_skill={'dexterity': 1}, tags=['beginner', 'tool'])
#endregion

#region Beings x16
# Faye. Manages the rationed cots and the only filtered-air room in the district.
default faye = Being("faye", name='Faye', desc='Manages the rationed cots and the only filtered-air room in the district.', location='tavern', pos='300,350', factions=['supply_union'], tags=['host', 'friendly', 'logistics'], affinity=10, gender='female', age=31, height='165 cm', weight='58 kg', hair_color='auburn', hair_style='braided', eye_color='green', face_shape='heart', skin_tone='light', build='slim', body_type='humanoid', breast_size='small', dick_size='n/a', foot_size=37, distinctive_feature='freckled nose', equipment={'head': 'bandana', 'torso': 'supply_apron', 'pants': 'work_pants', 'feet': 'work_boots'}, items=['ration_pack', 'water_flask', 'note_card', 'sewing_kit'])
# Theo. Dedicated to preserving pre-fall data logs and charting the decay of the global transmission grid.
default theo = Being("theo", name='Theo', desc='Dedicated to preserving pre-fall data logs and charting the decay of the global transmission grid.', base_image='chars/male_thin.png', location='temple', pos=[500, 0, 500], stats={'strength': 8, 'dexterity': 10, 'intelligence': 16, 'charisma': 14}, tags=['archivist', 'lore', 'researcher'], gender='male', age=27, height='172 cm', weight='60 kg', hair_color='dark brown', hair_style='messy', eye_color='green', face_shape='oval', skin_tone='light', build='slim', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=41, distinctive_feature='ink-smudged collar', equipment={'head': 'knit_cap', 'torso': 'archivist_coat', 'pants': 'slacks', 'feet': 'sneakers'}, items=['ration_bar', 'note_card', 'map_fragment', 'radio_receiver', 'battery_cell'])
# Nia. A sharp-eyed orphan who navigates the crawlspaces and service tunnels to avoid the 'Sleeper' drifts.
default nia = Being("nia", name='Nia', desc="A sharp-eyed orphan who navigates the crawlspaces and service tunnels to avoid the 'Sleeper' drifts.", location='market', pos='200,600', factions=[], tags=['child', 'scavenger', 'runner'], affinity=0, gender='female', age=12, height='145 cm', weight='38 kg', hair_color='black', hair_style='short curls', eye_color='brown', face_shape='round', skin_tone='medium', build='slight', body_type='humanoid', breast_size='n/a', dick_size='n/a', foot_size=35, distinctive_feature='scuffed knees', equipment={'head': 'knit_cap', 'torso': 'signal_hoodie', 'pants': 'track_pants', 'feet': 'sneakers'}, items=['glow_stick', 'protein_bar', 'water_flask', 'note_card'])
# Hakim. Manages the settlement's ration crates, medical supplies, and barter ledgers.
default hakim = Being("hakim", name='Hakim', desc="Manages the settlement's ration crates, medical supplies, and barter ledgers.", location='market', pos='600,550', factions=['supply_union'], tags=['merchant', 'organizer', 'logistics'], gender='male', age=45, height='180 cm', weight='82 kg', hair_color='black', hair_style='close-cropped', eye_color='brown', face_shape='rectangular', skin_tone='medium', build='solid', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=43, distinctive_feature='trimmed beard', equipment={'head': 'ball_cap', 'torso': 'logistics_coat', 'pants': 'slacks', 'feet': 'work_boots'}, items=['ration_pack', 'note_card', 'keycard', 'water_flask'])
# Clerk. A no-nonsense clerk who manages the official settlement exchange and logbooks.
default clerk = Being("clerk", name='Clerk', desc='A no-nonsense clerk who manages the official settlement exchange and logbooks.', base_image='chars/male_average.png', location='shop', tags=['trader', 'logistics'], gender='male', age=38, height='175 cm', weight='78 kg', hair_color='brown', hair_style='neat short', eye_color='hazel', face_shape='square', skin_tone='light', build='average', body_type='humanoid', breast_size=None, dick_size='average', foot_size=42, distinctive_feature='ink-stained fingertips', equipment={'head': 'ball_cap', 'torso': 'logistics_coat', 'pants': 'slacks', 'feet': 'sneakers'}, items=['keycard', 'note_card', 'ration_pack', 'battery_cell'])
# Greta. Keeps the shelter's alarms, air filtration, and signal rigs working with scrap-tech.
default greta = Being("greta", name='Greta', desc="Keeps the shelter's alarms, air filtration, and signal rigs working with scrap-tech.", location='market', pos='400,500', factions=['supply_union'], tags=['crafter', 'mechanic', 'scraptech'], affinity=0, gender='female', age=40, height='172 cm', weight='74 kg', hair_color='blonde', hair_style='tied back', eye_color='blue', face_shape='square', skin_tone='light', build='sturdy', body_type='humanoid', breast_size='medium', dick_size='n/a', foot_size=39, distinctive_feature='oil-stained knuckles', equipment={'head': 'bandana', 'two_piece': 'coveralls', 'feet': 'work_boots'}, items=['scrap_parts', 'battery_cell', 'multitool', 'tool_pouch'])
# Lena. A veteran scout who reads the perimeter drifts like a topography map.
default lena = Being("lena", name='Lena', desc='A veteran scout who reads the perimeter drifts like a topography map.', location='forest_edge', pos='400,300', factions=['perimeter_watch'], tags=['outdoors', 'scout', 'tracker'], affinity=-5, gender='female', age=33, height='176 cm', weight='66 kg', hair_color='black', hair_style='braided ponytail', eye_color='amber', face_shape='diamond', skin_tone='olive', build='athletic', body_type='humanoid', breast_size='small', dick_size='n/a', foot_size=39, distinctive_feature='sun-faded freckles', equipment={'head': 'watch_cap', 'torso': 'utility_jacket', 'pants': 'cargo_pants', 'feet': 'trail_boots'}, items=['map_fragment', 'compass', 'protein_bar', 'water_flask'])
# Mara. The steady hand keeping the settlement's life-support and quarantine running.
default mara = Being("mara", name='Mara', desc="The steady hand keeping the settlement's life-support and quarantine running.", base_image='chars/male_fit.png', location='market', pos='800,600', factions=['perimeter_watch', 'supply_union'], tags=['important', 'leader', 'coordinator'], gender='male', age=42, height='178 cm', weight='80 kg', hair_color='black', hair_style='short', eye_color='brown', face_shape='square', skin_tone='medium', build='sturdy', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=42, distinctive_feature='deep laugh lines', equipment={'head': 'watch_cap', 'torso': 'logistics_coat', 'pants': 'slacks', 'feet': 'work_boots'}, items=['keycard', 'note_card', 'compass', 'water_flask'])
# Jace. A lookout at the rusted harbor who watches for 'Drifter' anomalies in the fog.
default jace = Being("jace", name='Jace', desc="A lookout at the rusted harbor who watches for 'Drifter' anomalies in the fog.", location='docks', pos='700,500', factions=[], tags=['lookout', 'worker'], affinity=5, gender='male', age=28, height='182 cm', weight='76 kg', hair_color='sandy blond', hair_style='messy', eye_color='gray-blue', face_shape='long', skin_tone='light', build='lean', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=44, distinctive_feature='weathered hands', equipment={'head': 'watch_cap', 'torso': 'rain_shell', 'pants': 'cargo_pants', 'feet': 'rubber_boots'}, items=['signal_chalk', 'glow_stick', 'water_flask', 'protein_bar'])
# Ash. A quiet survivor who claims to have walked from the Dead Zones without a signal baton.
default ash = Being("ash", name='Ash', desc='A quiet survivor who claims to have walked from the Dead Zones without a signal baton.', location='tavern', pos='150,400', factions=[], tags=['mysterious', 'survivor', 'drifter'], affinity=-10, gender='nonbinary', age=29, height='178 cm', weight='70 kg', hair_color='black', hair_style='cropped', eye_color='dark brown', face_shape='angular', skin_tone='medium', build='lean', body_type='humanoid', breast_size='n/a', dick_size='n/a', foot_size=42, distinctive_feature='scar across left eyebrow', equipment={'head': 'knit_cap', 'torso': 'rain_shell', 'pants': 'cargo_pants', 'feet': 'trail_boots'}, items=['protein_bar', 'water_flask', 'glow_stick', 'map_fragment'])
# Rafi. The firm voice at the quarantine gate, ensuring no 'Drift' enters the settlement.
default rafi = Being("rafi", name='Rafi', desc="The firm voice at the quarantine gate, ensuring no 'Drift' enters the settlement.", location='guardhouse', pos='600,400', factions=['perimeter_watch'], tags=['authority', 'watch', 'guard'], affinity=0, gender='male', age=39, height='183 cm', weight='86 kg', hair_color='black', hair_style='buzzed', eye_color='brown', face_shape='square', skin_tone='medium-dark', build='muscular', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=44, distinctive_feature='scar along jaw', equipment={'head': 'watch_cap', 'torso': 'patrol_jacket', 'pants': 'patrol_pants', 'feet': 'patrol_boots'}, items=['keycard', 'multitool', 'water_flask', 'ration_pack'])
# Imani. A high-level policy lead tracking route safety, ration efficiency, and drift probability.
default imani = Being("imani", name='Imani', desc='A high-level policy lead tracking route safety, ration efficiency, and drift probability.', base_image='chars/female_fit.png', location='market', pos='900,600', factions=['supply_union'], tags=['planner', 'leader', 'logistics'], gender='female', age=36, height='168 cm', weight='60 kg', hair_color='black', hair_style='short twists', eye_color='brown', face_shape='oval', skin_tone='dark', build='fit', body_type='humanoid', breast_size='small', dick_size='n/a', foot_size=38, distinctive_feature='sharp cheekbones', equipment={'head': 'ball_cap', 'torso': 'logistics_coat', 'pants': 'slacks', 'feet': 'sneakers'}, items=['map_fragment', 'note_card', 'compass', 'water_flask'])
# Kael. A high-risk courier who uses kinetic force to clear 'Sleeper' blockades.
default kael = Being("kael", name='Kael', desc="A high-risk courier who uses kinetic force to clear 'Sleeper' blockades.", base_image='chars/male_fit.png', location='market', items=['utility_pry_bar', 'protein_bar', 'water_flask', 'multitool', 'lockpick_set'], stats={'strength': 14, 'dexterity': 12, 'intelligence': 8, 'charisma': 10}, factions=['perimeter_watch'], tags=['breacher', 'combat'], gender='male', age=30, height='185 cm', weight='85 kg', hair_color='dark brown', hair_style='cropped', eye_color='hazel', face_shape='angular', skin_tone='tan', build='muscular', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=44, distinctive_feature='scarred knuckles', equipment={'head': 'watch_cap', 'torso': 'patrol_jacket', 'pants': 'patrol_pants', 'feet': 'patrol_boots', 'main_hand': 'utility_pry_bar'})
# Survivor. A veteran of the Dead Zones who can hear the rhythm of the Silence.
default survivor = Being("survivor", name='Survivor', desc='A veteran of the Dead Zones who can hear the rhythm of the Silence.', base_image='chars/male_fit.png', location='market', pos=[960, 0, 800], stats={'strength': 14, 'dexterity': 12, 'intelligence': 10, 'charisma': 8, 'hp': 100, 'max_hp': 100}, tags=['protagonist', 'survivor'], gender='male', age=32, height='179 cm', weight='76 kg', hair_color='brown', hair_style='shaggy', eye_color='gray', face_shape='angular', skin_tone='light', build='lean', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=42, distinctive_feature='sunburned nose', equipment={'head': 'knit_cap', 'torso': 'utility_jacket', 'pants': 'cargo_pants', 'feet': 'trail_boots', 'main_hand': 'signal_baton'}, items=['camp_kit', 'water_flask', 'ration_pack', 'compass', 'protein_bar', 'ration_bar'])
# Jun. A calm voice who keeps the shelter steady with rhythmic cadence and signal-dampening tones.
default jun = Being("jun", name='Jun', desc='A calm voice who keeps the shelter steady with rhythmic cadence and signal-dampening tones.', location='tavern', pos='500,300', factions=[], tags=['signal', 'tech', 'signalist'], affinity=10, gender='male', age=26, height='171 cm', weight='63 kg', hair_color='black', hair_style='straight medium', eye_color='brown', face_shape='oval', skin_tone='light-medium', build='slender', body_type='humanoid', breast_size='n/a', dick_size='average', foot_size=41, distinctive_feature='inked signal lines on wrist', equipment={'head': 'knit_cap', 'torso': 'signal_hoodie', 'pants': 'track_pants', 'feet': 'sneakers'}, items=['radio_receiver', 'battery_cell', 'signal_chalk', 'water_flask'])
# Elena. A high-tension combat medic who specializes in frequency-induced trauma and Sleeper-bite stabilization.
default elena = Being("elena", name='Elena', base_image='chars/female_fit.png', desc='A high-tension combat medic who specializes in frequency-induced trauma and Sleeper-bite stabilization.', location='temple', pos='500,300', factions=['field_meds'], tags=['medic', 'clinician', 'healer'], affinity=20, gender='female', age=34, height='170 cm', weight='62 kg', hair_color='black', hair_style='tight bun', eye_color='gray', face_shape='oval', skin_tone='olive', build='athletic', body_type='humanoid', breast_size='medium', dick_size='n/a', foot_size=38, distinctive_feature='clinic tattoo behind ear', equipment={'head': 'surgical_cap', 'torso': 'medical_coat', 'pants': 'scrub_pants', 'feet': 'clinic_shoes'}, items=['med_patch', 'antiseptic_wipe', 'bandage_roll', 'water_flask'])
#endregion

#region Inventorys x0
#endregion

#region Dialogues x0
#endregion

#region Has_trades x0
#endregion

#region Has_trades x0
#endregion

#region Zones x9
# Supply Depot. Shelves of ration tins and repair tools.
define shop = Zone("shop", name='Supply Depot', desc='Shelves of ration tins and repair tools.', entities=[{'id': 'market', 'type': 'link', 'x': 960, 'y': 800, 'spawn': [1600, 540]}])
define shop__back_room = Zone("shop__back_room", desc='Shelves are here.', name='Back Room')
# Civic Hub. A sandbagged plaza with radios and posted routes.
define civic_hub = Zone("civic_hub", name='Civic Hub', desc='A sandbagged plaza with radios and posted routes.', subtype='city', position=[1000, 0, 1000], entities=[])
# Quarantine Docks. Silent piers and a distant, empty harbor.
define docks = Zone("docks", name='Quarantine Docks', desc='Silent piers and a distant, empty harbor.', subtype='city', position=[1300, 1200])
# Outskirts Line. The fence line where the city thins into overgrowth and silent lots.
define outskirts_line = Zone("outskirts_line", name='Outskirts Line', desc='The fence line where the city thins into overgrowth and silent lots.', subtype='wilderness', position=[600, 0, 500])
# Dawn Clinic. Clean sheets, soft lights, and careful hands.
define dawn_clinic = Zone("dawn_clinic", name='Dawn Clinic', desc='Clean sheets, soft lights, and careful hands.', subtype='city', position=[900, 0, 700], tags=['safe'], entities=[])
# Broadcast Tower. A concrete spire that once blanketed the city with signal.
define broadcast_tower = Zone("broadcast_tower", name='Broadcast Tower', desc='A concrete spire that once blanketed the city with signal.', subtype='structure', position=[1200, 0, 800], entities=[])
define broadcast_tower__lobby = Zone("broadcast_tower__lobby", name='Broadcast Tower Lobby', desc='Dusty consoles and a sealed control room.', subtype='floor', position=[1200, 0, 800], floor=1, entities=[{'id': 'signal_console', 'type': 'object', 'name': 'Signal Console', 'desc': 'A flickering screen covered in grime. It hums with a steady rhythm.', 'label': 'console_interaction', 'x': 800, 'y': 400, 'sprite': 'images/topdown/chars/male_base.png'}])
# Quarantine Gate. Checkpoint lights, logbooks, and a tight line of rules.
define quarantine_gate = Zone("quarantine_gate", name='Quarantine Gate', desc='Checkpoint lights, logbooks, and a tight line of rules.', subtype='city', position=[1050, 0, 1050], entities=[])
# Shelter Hall. Cots, quiet songs, and a warm meal if you're lucky.
define shelter_hall = Zone("shelter_hall", name='Shelter Hall', desc="Cots, quiet songs, and a warm meal if you're lucky.", tags=['safe'], subtype='city', position=[800, 0, 1100], entities=[])
# Safehouse. A quiet multi-level safehouse assigned to you within the quarantine block.
define safehouse = Zone("safehouse", name='Safehouse', desc='A quiet multi-level safehouse assigned to you within the quarantine block.', tags=['safe'], subtype='structure', position=[1000, 0, 1000], entities=[{'id': 'market', 'type': 'link', 'x': 200, 'y': 540, 'spawn': [200, 540]}])
define safehouse__attic = Zone("safehouse__attic", name='Attic', desc='A cramped attic full of stored crates and old insulation.', subtype='floor', floor=3)
define safehouse__top_floor = Zone("safehouse__top_floor", name='Top Floor', desc='Quiet sleeping quarters and the bathroom.', subtype='floor', floor=2)
define safehouse__main_bedroom = Zone("safehouse__main_bedroom", desc='Your assigned room with a narrow cot and a small mirror.', subtype='room', entities=[{'id': 'bed', 'type': 'object', 'name': 'Cot', 'desc': 'A narrow cot with a clean blanket.', 'x': 300, 'y': 500, 'sprite': 'images/topdown/chars/male_base.png'}, {'id': 'mirror', 'type': 'object', 'name': 'Small Mirror', 'desc': 'Check your face and move on.', 'x': 1400, 'y': 300, 'sprite': 'images/topdown/chars/male_base.png'}, {'id': 'closet', 'type': 'container', 'name': 'Supply Locker', 'desc': 'A battered locker for your essentials.', 'x': 0, 'y': 0, 'items': ['camp_kit', 'ration_bar', 'antiseptic_ampoule'], 'sprite': 'images/topdown/chars/male_base.png'}], name='Main Bedroom')
define safehouse__guest_bedroom = Zone("safehouse__guest_bedroom", desc='A spare room kept ready for visitors or injured runners.', subtype='room', name='Guest Bedroom')
define safehouse__kids_bedroom = Zone("safehouse__kids_bedroom", desc='A small room with mismatched blankets and hand-drawn maps.', subtype='room', name='Kids Bedroom')
define safehouse__bathroom = Zone("safehouse__bathroom", desc='A compact washroom with a trickling filter line.', subtype='room', name='Bathroom')
define safehouse__main_floor = Zone("safehouse__main_floor", name='Main Floor', desc='The day-to-day living space, with work areas and a garage.', subtype='floor', floor=1)
define safehouse__garage = Zone("safehouse__garage", desc='A converted bay for carts, tools, and quiet repairs.', subtype='room', name='Garage')
define safehouse__kitchen = Zone("safehouse__kitchen", desc='A narrow galley for ration prep and shared meals.', subtype='room', name='Kitchen')
define safehouse__living_room = Zone("safehouse__living_room", desc='A low-lit common area with patched couches and old screens.', subtype='room', name='Living Room')
define safehouse__office = Zone("safehouse__office", desc='A cramped desk space for logs, maps, and comms.', subtype='room', name='Office')
define safehouse__basement = Zone("safehouse__basement", name='Basement', desc='Utility space with old ducting and supply cages.', subtype='floor', floor=0)
define safehouse__furnace_room = Zone("safehouse__furnace_room", desc='The heat hub, lined with filters and rumbling vents.', subtype='room', name='Furnace Room')
define safehouse__supply_room = Zone("safehouse__supply_room", desc='Locked shelves of spare parts and emergency stocks.', subtype='room', name='Supply Room')
#endregion

#region Item_filterss x0
#endregion

#region Clans x4
# Remnant Government. A thin, centralized authority clinging to protocols, radios, and old-world order.
define remnant_government = Clan("remnant_government", name='Remnant Government', desc='A thin, centralized authority clinging to protocols, radios, and old-world order.', allies=['perimeter_watch'], enemies=['infected'])
# Field Medics. Healthcare crews managing triage, quarantine care, and frequency-related trauma.
define field_meds = Clan("field_meds", name='Field Medics', desc='Healthcare crews managing triage, quarantine care, and frequency-related trauma.', allies=['supply_union'], enemies=['infected'])
# Supply Union. Ration runners, quartermasters, and salvage crews keeping the settlement stocked.
define supply_union = Clan("supply_union", name='Supply Union', desc='Ration runners, quartermasters, and salvage crews keeping the settlement stocked.', allies=['perimeter_watch', 'field_meds'], enemies=['infected'])
# Perimeter Watch. The quiet line of patrols, checkpoints, and scouts who keep the sleepers out.
define perimeter_watch = Clan("perimeter_watch", name='Perimeter Watch', desc='The quiet line of patrols, checkpoints, and scouts who keep the sleepers out.', allies=['supply_union', 'remnant_government'], enemies=['infected'])
#endregion

#region Perks x1
# Silver Tongue. Your words carry extra weight.
define silver_tongue = Perk("silver_tongue", name='Silver Tongue', desc='Your words carry extra weight.', tags=['social'], mods={'charisma': 2})
#endregion

#region Stats x4
# Dexterity. Agility, reflexes, and precision.
define dexterity = Stat("dexterity", name='Dexterity', desc='Agility, reflexes, and precision.', default=10, min=1, max=100)
# Intelligence. Mental acuity and magical aptitude.
define intelligence = Stat("intelligence", name='Intelligence', desc='Mental acuity and magical aptitude.', default=10, min=1, max=100)
# Charisma. Social influence and persuasion.
define charisma = Stat("charisma", name='Charisma', desc='Social influence and persuasion.', default=10, min=1, max=100)
# Strength. Physical power and carrying capacity.
define strength = Stat("strength", name='Strength', desc='Physical power and carrying capacity.', default=10, min=1, max=100)
#endregion

#region Traits x3
# Hair. 
define hair = Trait("hair", name='Hair', tags=['body'], keys={'color': {'options': ['black', 'brunette', 'blonde']}, 'style': {'options': []}, 'length': {'options': []}})
# Body. 
define body = Trait("body", name='Body', tags=['body'], defaults={'build': {'options': ['skinny', 'average', 'big']}, 'height': {'range': [0, 100]}, 'weight': {'range': [0, 100]}, 'skin_tone': {'options': ['light', 'average', 'dark']}})
# Age. 
define age = Trait("age", name='Age', tags=['body'], defaults={'age': {'range': [0, 100]}})
#endregion

#region Appearances x0
#endregion
#region Labels x302
label camp_kit:
    label .inspect:
        "A compact bedroll, a small firestarter, and a waterproof tarp."
        "Useful for resting when the road is rough."
        return
    return
label utility_pry_bar:
    label .inspect:
        "Scuffed steel, a wrapped grip, and a few old paint flecks."
        "It is built to endure."
        return
    return
label ration_bar:
    label .inspect:
        $ call_flow_action(SHOW_ITEM, "ration_bar")
        "Sealed, _sweet_, and a little chalky."
        "It keeps you _moving_."
        "Weighs $ration_bar.weight lbs."
        $ call_flow_action(HIDE_ITEM, "ration_bar")
        return
    return
label antiseptic_ampoule:
    label .inspect:
        "Clear liquid, faint alcohol smell, and a sterile snap when opened."
        return
    return
label iron_and_fire:
    label .started:
        "Greta needs wood and stone for a signal baton."
        return
    label .collect_wood:
        "That should be enough wood."
        return
    label .collect_stone:
        "Got the stone. Back to Greta."
        return
    label .craft_a_signal_baton:
        Greta "Not a weapon. A tool. It can guide sleepers away from people."
        return
    label .passed:
        "I can help without harming anyone."
        return
    return
label theo_secret:
    label .started:
        "Theo believes the first report was archived in a sealed record."
        return
    label .find_the_outbreak_note:
        "This looks like the first entry. The handwriting is frantic."
        return
    label .passed:
        theo "This confirms the first wave never turned violent."
        theo "We can use this."
        return
    return
label formal_intro:
    label .started:
        "Mara asked me to introduce myself to Captain Rafi at the Quarantine Gate."
        return
    label .speak_with_coordinator_mara:
        "Mara knows the state of every street and every gate."
        return
    label .visit_the_quarantine_gate:
        "This is where the lines are held and checked."
        return
    label .speak_with_captain_rafi:
        "Rafi will decide if I can pass the outer line."
        return
    label .passed:
        "I know who holds the line. Now I can move."
        return
    return
label ration_run:
    label .started:
        "The pantry is low. The shelter needs rations for the sick."
        "I should check the Supply Depot."
        return
    label .visit_the_supply_depot:
        "This is the depot. If any rations remain, they will be here."
        return
    label .collect_rations:
        "That should be enough for today."
        return
    label .passed:
        "The shelter will eat tonight."
        return
    return
label long_dawn:
    label .started:
        $ call_flow_action(PLAYER, survivor)
        $ call_flow_action(ZONE, docks)
        "You check your route map and count the turns to the Broadcast Tower."
        "A mayor at the line says the signal shifted again and wants anything you learn."
        "Mara sends a runner to learn why the Broadcast Tower changed its pulse and how to guide the sleepers without harm."
        return
    label .ordinary_world:
        "Routines hold the line - logbooks, rations, and quiet rules."
        return
    label .call_to_adventure:
        "The Spire shifts again. Find the source and bring back a peaceful answer."
        return
    label .refusal_of_the_call:
        "The guardhouse warns that noise means danger. Doubt settles in before the gates."
        return
    label .meeting_the_mentor:
        "Lena teaches how to step between beats and mark safe lanes without drawing the drift."
        return
    label .crossing_the_threshold:
        "You pass the last sandbags and enter the overgrowth, counting your breaths."
        return
    label .tests_and_allies:
        "Greta needs wood and stone to tune a signal baton that guides instead of harms."
        return
    label .approach:
        "The safe route narrows. The Broadcast Tower rises ahead, low and listening."
        return
    label .ordeal:
        "Inside the lobby, sleepers drift like fog. You move quietly, hands open, heart steady."
        return
    label .reward:
        "A data drive holds the broadcast pattern. It is warm with the city's memory."
        return
    label .the_road_back:
        "The return run favors patience over speed. Follow the dead zones home."
        return
    label .resurrection:
        "Mara and Greta test a soft counter-tone. The sleepers turn without panic."
        return
    label .return_with_the_elixir:
        "Routes are updated, the new tone is logged, and the city breathes easier."
        return
    label .passed:
        "The Spire remains a warning, but the settlement now knows how to guide the drift without violence."
        return
    return
label silent_tide:
    label .started:
        $ call_flow_action(PLAYER, theo)
        $ call_flow_action(ZONE, temple)
        "Your logbook is full of patterns. The sleepers drift to the same pulse each night."
        "A priestess asks you to keep your steps soft and your breaths even."
        "The tide of sleepers drifts in a steady pulse, and you set out to learn why."
        theo "I should look for the clerk."
        $ call_flow_action(GOAL_SHOW, "silent_tide#ordinary_world")
        return
    label .ordinary_world:
        "The records in the shop are endless, their weight familiar and heavy."
        "The archives are quiet, the records heavy, and the city survives by listening more than shouting."
        theo "Perhaps the clerk knows something about the patterns in our city."
        clerk "The archives hold many secrets. Few listen anymore."
        $ call_flow_action(PLAY, theo, nod)
        $ call_flow_action(GOAL_TICK, "silent_tide#ordinary_world")
        $ call_flow_action(GOAL_SHOW, "silent_tide#call_to_adventure")
        return
    label .call_to_adventure:
        "A new rhythm rises from the harbor. Track it before it swells."
        "A sound rises from the harborâ€”not quite music, not quite breathing."
        theo "There's a rhythm here... something old and patient."
        $ call_flow_action(NOTIFY, "You sense a pattern in the air, pulling your attention to the sea.")
        $ call_flow_action(GOAL_TICK, "silent_tide#call_to_adventure")
        $ call_flow_action(GOAL_SHOW, "silent_tide#refusal_of_the_call")
        return
    label .refusal_of_the_call:
        "The safety of the archives calls you back. Outside, the unknown waits."
        "Leaving the stacks feels like leaving the past. The risk is real, and so is the fear."
        theo "Maybe it's safer to stay here. Record, catalog, preserve."
        clerk "The city has always needed watchers, not hunters."
        "You feel the weight of habit holding you in place."
        $ call_flow_action(GOAL_TICK, "silent_tide#refusal_of_the_call")
        $ call_flow_action(GOAL_SHOW, "silent_tide#meeting_the_mentor")
        return
    label .meeting_the_mentor:
        $ call_flow_action(GOAL_TICK, "silent_tide#meeting_the_mentor")
        "Ash sits quietly, listening to a sound only they can hear."
        theo "I've been tracking the rhythm from the harbor. Do you hear it?"
        ash "For years. It's an old music, and the sleepers are its instrument."
        ash "Move slow. Breathe low. The tide carries wisdom, not anger."
        $ call_flow_action(NOTIFY, "Ash taught you the ways of the drift.")
        $ call_flow_action(GOAL_SHOW, "silent_tide#crossing_the_threshold")
        return
    label .crossing_the_threshold:
        $ call_flow_action(GOAL_TICK, "silent_tide#crossing_the_threshold")
        "The docks are vast and still. No ships move. No voices rise. Only the pulse."
        theo "Here. I feel it strongest here."
        "The sleepers drift nearby, their steps synchronized to something unseen."
        $ call_flow_action(NOTIFY, "The rhythm grows clearer at the threshold between city and sea.")
        $ call_flow_action(GOAL_SHOW, "silent_tide#tests_and_allies")
        return
    label .tests_and_allies:
        $ call_flow_action(GOAL_TICK, "silent_tide#tests_and_allies")
        "You return to gather stories from those who witness the sleepers' rhythm."
        theo "I need to hear what others know about the tide. Will you tell me?"
        ash "Every keeper in this city hears it differently. That's the secret."
        "The testimonies weave together like a pattern only visible from far away."
        $ call_flow_action(NOTIFY, "Testimonies recorded: The rhythm is collective, not singular.")
        $ call_flow_action(GOAL_SHOW, "silent_tide#approach")
        return
    label .approach:
        $ call_flow_action(GOAL_TICK, "silent_tide#approach")
        "The tower looms above the city, its old transmitters silent but still potent."
        theo "The rhythm connects to the signal corridors. They all run through the tower."
        "You trace the pulse lines on ancient maps, seeing the architecture of sound."
        $ call_flow_action(NOTIFY, "Signal corridors mapped: The broadcast system still remembers how to sing.")
        $ call_flow_action(GOAL_TICK, "silent_tide#ordeal")
        return
    label .ordeal:
        $ call_flow_action(GOAL_TICK, "silent_tide#ordeal")
        "The stairwell is labyrinthine, and the sleepers are everywhere here, drifting in spirals."
        theo "Stay calm. Move like the tide moves. Don't disturb the drift."
        "Your breath synchronizes with theirs. Your steps match their steps. You become part of the rhythm."
        $ call_flow_action(NOTIFY, "You are one voice in the tide now.")
        "At last, you reach the inner console, untouched and still humming."
        $ call_flow_action(GOAL_SHOW, "silent_tide#reward")
        return
    label .reward:
        $ call_flow_action(GOAL_TICK, "silent_tide#reward")
        "The console yields its secretâ€”a frequency pattern written in old code, waiting generations for this moment."
        theo "Here. This is how to guide them, not drag them."
        "The harmonic key sings in your hands, no longer a weapon but a song."
        $ call_flow_action(NOTIFY, "The Harmonic Key obtained: A frequency that guides without force.")
        $ call_flow_action(GOAL_SHOW, "silent_tide#the_road_back")
        return
    label .the_road_back:
        $ call_flow_action(GOAL_TICK, "silent_tide#the_road_back")
        "The temple is a place where voices gather. You carry something precious back to it."
        theo "I have a teaching to share. Will you listen?"
        "The gathered fold listen as you explain the rhythm, the pattern, the way forward."
        $ call_flow_action(NOTIFY, "The pattern is translated: From archive to action, from silence to song.")
        $ call_flow_action(GOAL_SHOW, "silent_tide#resurrection")
        return
    label .resurrection:
        $ call_flow_action(GOAL_SHOW, "silent_tide#resurrection")
        "The harmonic frequency spreads through the city via signal corridors old and new."
        theo "Does it work? Do they follow the new rhythm?"
        "The sleepers shift, slower, gentler, guided by a frequency that respects their choice."
        $ call_flow_action(NOTIFY, "The broadcast succeeds: No force, no violence, only the rhythm continuing.")
        $ call_flow_action(GOAL_SHOW, "silent_tide#return_with_the_elixer")
        return
    label .return_with_the_elixir:
        $ call_flow_action(GOAL_TICK, "silent_tide#return_with_the_elixir")
        "The city assembles in the temple. The wisdom you bring is not conquest but coexistence."
        theo "The sleepers are not our enemy. They are part of the rhythm we all share."
        "A new way of being settles over the city like fog becoming rain."
        $ call_flow_action(NOTIFY, "The Elixir shared: Wisdom without dominion, listening without control.")
        $ call_flow_action(GOAL_PASSED, "silent_tide")
        return
    label .passed:
        "The Silent Tide becomes a living practice, and the city learns to survive without violence."
        return
    label .ask_the_clerk:
        theo "Excuse me â€” have you noticed the sleepers' rhythm?"
        clerk "It's old as the docks. Folks hush and follow it when the moon leans right."
        $ call_flow_action(FLAG, asked_clerk=true)
        $ call_flow_action(NOTIFY, "Clerk: They remember a tune from the sea.")
        return
    label .share_the_pattern_with_ash:
        theo "I tracked the tide lines â€” I think I can shape them without force."
        ash "If you can hum it slow enough, maybe they follow a kinder path."
        $ call_flow_action(FLAG, shared_with_ash=true)
        $ call_flow_action(NOTIFY, "Ash: We can try a gentle frequency.")
        return
    label .attempt_harmonic_broadcast:
        theo "I can try the harmonic broadcast â€” hand me the key."
        clerk "If it works, it could guide them. If it fails..."
        $ call_flow_action(FLAG, broadcast_attempted=true)
        $ call_flow_action(GIVE, who=theo, item=protocol_deciphered)
        return
    return
label faye:
    label .talk:
        faye "You look like you've been breathing too much static. Sit, eat your rations, then move on."
        faye "Space is tight, but I can find a cot if you need to let your frequency drop for a while."
        $ faye.mark_as_met()
        return
    return
label theo:
    label .talk:
        theo "If we can chart the pattern decay of the Spire, we can predict when the next drift will peak."
        theo "History isn't just about what we lost; it's about the frequencies we forgot how to tune into."
        $ call_flow_action(MET, "theo")
        return
    return
label nia:
    label .talk:
        nia "You move like you're wearing heavy boots. You'll wake the whole block up like that."
        nia "If you ever need a route that doesn't involve walking through a drift, I know where the ducts still hold."
        $ nia.mark_as_met()
        return
    return
label hakim:
    label .talk:
        hakim "Every nutrition bar is counted. Every medical kit is signed for by the Coordinator."
        hakim "If you want to barter, bring something the settlement can actually useâ€”scrap tech, clean water, or data logs."
        $ hakim.mark_as_met()
        return
    return
label clerk:
    label .talk:
        clerk "Take what you've been rationed for, and make sure you log your exchange in the book. No credit in the Silence."
        $ clerk.mark_as_met()
        return
    return
label greta:
    label .talk:
        greta "I can quiet a rusty hinge or wake the whole block with one frequency tap."
        greta "If you're heading out, you'll need a signal baton. Bring me enough scrap wood and stone weights, and I'll rig one for you."
        $ greta.mark_as_met()
        return
    return
label lena:
    label .talk:
        lena "The sleepers follow sound more than sight. If you're going to survive the forest edge, you need to learn to walk between the beats."
        lena "Keep your steps light and your voice softer. The drift is sensitive today."
        $ lena.mark_as_met()
        return
    label .ask_for_a_guide:
        lena "Fine. But if you start humming or dragging your feet, I'm leaving you as bait. Keep up."
        $ call_flow_action(COMPANION, ADD, "lena")
        $ call_flow_action(FLAG, SET, scout_joined, true)
        $ call_flow_action(BOND, ADD, "lena", trust, 3)
        return
    label .ask_to_part_ways:
        lena "Understood. I'll recalibrate the markers on my way back. Stay quiet."
        $ call_flow_action(COMPANION, REMOVE, "lena")
        $ call_flow_action(FLAG, SET, scout_joined, false)
        return
    return
label mara:
    label .talk:
        mara "You made it in. Good. We need fast legs and even calmer voices."
        mara "The signal from the old Spire is shifting. If we don't adapt the perimeter sonar, the sleepers will be at the gates by dawn."
        $ mara.mark_as_met()
        return
    label .offer_help:
        player "If you need someone fast, I can run the perimeter."
        mara "Good. We're blind out there. Take this route mapâ€”it's marked with the latest safe-zones and frequency dead-spots."
        $ mara.items.append(Item("Safe Route Map", "Marked safe corridors and quiet zones."))
        $ call_flow_action(BOND, ADD, "mara", trust, 5)
        return
    label .ask_about_the_signal:
        mara "It started three nights ago. A rhythmic, low-frequency pulse."
        mara "It's drawing the sleepers in from the plains. If we can't find a way to shift the frequency, we'll be overrun by the week's end."
        return
    label .report_on_spire:
        player "I have the protocol drive from the Spire. The lobby was full of themâ€”it was like walking through a dream where nobody breathes."
        mara "Every year we lose more to the drift. This drive... it's the first real data we've had on their resonance in a decade."
        mara "Give me a moment to patch it into the main console. We need to see if we can broadcast a counter-tone."
        $ call_flow_action(NOTIFY, "Deciphering protocol...")
        $ call_flow_action(GIVE, protocol_deciphered)
        $ call_flow_action(FLAG_SET, protocol_deciphered, true)
        mara "There. It's not just a signal. It's a bridge. We can lead them away, or we can shut their cognitive resonance down entirely."
        return
    return
label jace:
    label .talk:
        jace "No ships coming in, just the wind and the sound of the structural rust groaning."
        jace "If the tide brings in a drift from the Spire, I ring the chime and we all evacuate to the higher districts."
        $ jace.mark_as_met()
        return
    return
label ash:
    label .talk:
        ash "The city isn't dead. It's just listening for the right frequency to scream."
        ash "If you go out into the drift, go light. The Silence doesn't like heavy footsteps."
        $ ash.mark_as_met()
        return
    return
label rafi:
    label .talk:
        rafi "Keep your steps light and your voice lower. The fence only holds if the noise stays inside."
        rafi "We keep the line so others can sleep without waking up as one of them."
        $ rafi.mark_as_met()
        return
    label .request_gate_pass:
        rafi "I can log a short-term pass. If the sensors pick up a spike in your frequency, don't expect us to open the gate when you come back."
        $ call_flow_action(FLAG, SET, gate_pass, true)
        $ call_flow_action(BOND, ADD, "rafi", respect, 3)
        $ call_flow_action(NOTIFY, "Gate pass logged.")
        return
    label .report_a_quiet_route:
        rafi "Good. Every quiet route is a lifeline. I'll update the patrol logs."
        $ call_flow_action(BOND, ADD, "rafi", trust, 2)
        return
    return
label imani:
    label .talk:
        imani "We balance the data points: food, water, and Silence. If any one drops, the settlement falls."
        imani "If you've been outside, report any changes in the sleeper patterns immediately. Every pulse counts."
        $ imani.mark_as_met()
        return
    return
label kael:
    label .talk:
        kael "Don't just stand there making noise. Noise is death."
        kael "Unless you're making it to clear a path. You looking for a piece of the next breach?"
        $ kael.mark_as_met()
        return
    label .ask_about_breaching:
        kael "You don't clear them all. You find the resonance point, hit it hard, and run through the gap before they reset."
        kael "It's about timing and weight. Stay heavy, move fast."
        return
    return
label survivor:
    label .talk:
        player "I've walked the quiet roads since the first pattern broke. These 'Sleepers'... they're just echoes of us, waiting for the right tone to wake up."
        return
    return
label jun:
    label .talk:
        jun "The hall is loud inside, but the Silence is louder outside. The right cadence keeps the drift from noticing we're still here."
        jun "If you can carry a signal baton, I can teach you a dampening cadence."
        $ jun.mark_as_met()
        return
    label .learn_cadence:
        jun "Three beats, then a breath. Let the frequency settle between your steps. Keep it even."
        $ call_flow_action(PERK, ADD, silver_tongue)
        $ call_flow_action(FLAG, SET, cadence_learned, true)
        return
    return
label elena:
    label .talk:
        elena "Slow breaths. Keep your hands where I can see them. Clean hands keep people on this side of the pulse."
        elena "If you feel the 'Static' in your head, report to the clinic immediately. We can't afford a sleeper waking up inside the walls."
        $ elena.mark_as_met()
        return
    label .checkup:
        elena "Hold still. It's just a diagnostic sweep."
        $ call_flow_action(STATUS, REMOVE, flu)
        $ call_flow_action(NOTIFY, "Your cognitive resonance stabilizes.")
        return
    label .battery_cell:
        elena "Good. I can keep the clinic lights stable for another night."
        $ call_flow_action(GIVE, battery_cell, _from=player, _to="elena", count=1)
        $ call_flow_action(NOTIFY, "You gave Elena a Battery Cell.")
        return
    return
label broadcast_tower:
    label .console:
        player "The screen is asking for an override."
        player "If I can pull the data now, maybe I can make it back before the sleepers shift."
        $ call_flow_action(NOTIFY, "Recovering protocol...")
        $ call_flow_action(GAIN, broadcast_protocol)
        $ call_flow_action(FLAG_SET, protocol_recovered, true)
        return
    return
label safehouse:
    label .bed:
        $ call_flow_action(REST, 8)
        "You wake to the soft hum of the wall speakers."
        return
    label .mirror:
        "You check for dust, bruises, and any new marks."
        "All clear."
        return
    return
#endregion